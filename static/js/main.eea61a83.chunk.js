(this["webpackJsonpmovie-finder"]=this["webpackJsonpmovie-finder"]||[]).push([[0],{12:function(e,a,t){e.exports={search:"Search_search__1pcFU",searchInput:"Search_searchInput__qbYLk",dropResults:"Search_dropResults__1Ibm5",resultsTable:"Search_resultsTable__2vORt"}},18:function(e,a,t){e.exports={searchItem:"SearchItem_searchItem__2JIIt",description:"SearchItem_description__11otg",quickView:"SearchItem_quickView__1uRIK"}},33:function(e,a,t){e.exports={header:"Header_header__1Y4h7"}},35:function(e,a,t){e.exports=t.p+"static/media/tmdb_logo.31d26327.svg"},36:function(e,a,t){e.exports={ldsFacebook:"Preloader_ldsFacebook__1M1BE"}},37:function(e,a,t){e.exports=t.p+"static/media/no-poster-available.e7d69c9b.jpg"},39:function(e,a,t){e.exports=t(68)},44:function(e,a,t){},45:function(e,a,t){},68:function(e,a,t){"use strict";t.r(a);var n,r=t(0),c=t.n(r),o=t(13),l=t.n(o),i=(t(44),t(45),t(33)),u=t.n(i),s=t(2);!function(e){e.CHANGE_APP_LANGUAGE="App/CHANGE_APP_LANGUAGE"}(n||(n={}));var m=t(12),d=t.n(m),v=t(15),E=t(18),_=t.n(E),g=t(19),p=t.n(g),h=p.a.create({baseURL:"https://api.themoviedb.org/3",params:{api_key:"5de81459140dd5d712d2ee9802f7b03d"}}),f=function(e,a){return h.get("movie/".concat(e),{params:{language:a}})},b=function(e,a){return h.get("/search/movie",{params:{language:a,query:e,page:"1"}})},C=function(e,a){return"".concat("https://image.tmdb.org/t/p/").concat(a,"/").concat(e)},O=function(e){var a=e.movieListData,t=e.changeCurrentMovie,n=e.appLanguage,o=a.id,l=(a.release_date,a.vote_average),i=a.original_title,u=a.title,s="en-EN"===n?i:u,m=Object(r.useState)(!1),d=Object(v.a)(m,2),E=d[0],g=d[1];return c.a.createElement("tr",{className:_.a.searchItem,onClick:function(){t(o)},onMouseOver:function(){return g(!0)},onMouseLeave:function(){return g(!1)}},c.a.createElement("th",null,s),c.a.createElement("td",null,l),a.poster_path&&E&&c.a.createElement(S,{posterPath:a.poster_path}))},S=function(e){return c.a.createElement("div",{className:_.a.quickView},c.a.createElement("img",{src:C(e.posterPath,"w92"),alt:""}))};var I,j=function(e){var a=e.language,t=e.searchResults,n=e.searchWord,o=e.changeCurrentMovieCard,l=e.changeSearchWord,i=function(e){var a=Object(r.useState)(e),t=Object(v.a)(a,2),n=t[0],c=t[1],o=Object(r.useRef)(null),l=function(e){"Escape"===e.key&&c(!1)},i=function(e){o.current&&!o.current.contains(e.target)&&c(!1)};return Object(r.useEffect)((function(){return document.addEventListener("keydown",l,!0),document.addEventListener("click",i,!0),function(){document.removeEventListener("keydown",l,!0),document.removeEventListener("click",i,!0)}})),{ref:o,isComponentVisible:n,setIsComponentVisible:c}}(!1),u=i.ref,s=i.isComponentVisible,m=i.setIsComponentVisible,E=Object(r.useCallback)((function(e){o(e),m(!1)}),[o]);return c.a.createElement("div",{className:d.a.search,ref:u},c.a.createElement("input",{type:"text",className:d.a.searchInput,onFocus:function(){m(!0)},value:n,onChange:function(e){return l(e.currentTarget.value)}}),s&&c.a.createElement("div",{className:d.a.dropResults},c.a.createElement("table",{className:d.a.resultsTable},c.a.createElement("tbody",null,null===t||void 0===t?void 0:t.results.sort((function(e,a){return a.vote_average-e.vote_average})).slice(0,8).map((function(e){return c.a.createElement(O,{changeCurrentMovie:E,movieListData:e,key:e.id,appLanguage:a})}))))))};!function(e){e.SET_SEARCH_WORD="SET_SEARCH_WORD",e.SET_SEARCH_RESULTS="SET_SEARCH_RESULTS"}(I||(I={}));var N,R=function(e){return function(a){return{type:e,payload:a}}},T=R(I.SET_SEARCH_WORD),y=R(I.SET_SEARCH_RESULTS);!function(e){e.SET_MOVIE="SET_MOVIE",e.SET_LOADING="SET_LOADING",e.SET_MOVIE_ID="SET_MOVIE_ID"}(N||(N={}));var A=function(e){return function(a){return{type:e,payload:a}}},k=A(N.SET_MOVIE),w=A(N.SET_LOADING),L=A(N.SET_MOVIE_ID),D=c.a.memo((function(){console.log("search container");var e=Object(s.c)((function(e){return e.search.searchWord})),a=Object(s.c)((function(e){return e.search.searchResults})),t=Object(s.c)((function(e){return e.movie.movieId})),n=Object(s.c)((function(e){return e.app.language})),o=Object(s.b)(),l=Object(r.useCallback)(o,[]),i=Object(r.useCallback)((function(e){l(T({searchWord:e}))}),[]),u=Object(r.useCallback)((function(e){t!==e&&l(L({movieId:e}))}),[t]);return Object(r.useEffect)((function(){e.length>=3&&l(function(e){return function(a,t){console.log(t().app.language),b(e,t().app.language).then((function(e){a(y(e.data))})).catch((function(e){return console.log(e)}))}}(e))}),[e,n]),c.a.createElement(j,{language:n,searchResults:a,searchWord:e,changeCurrentMovieCard:u,changeSearchWord:i})})),M=t(10),G=c.a.memo((function(){console.log("header render");var e=Object(s.b)(),a=function(a){var t;e((t=a.currentTarget.dataset.lang,{type:n.CHANGE_APP_LANGUAGE,payload:{language:t}}))};return c.a.createElement("header",{className:u.a.header},c.a.createElement("nav",null,c.a.createElement(M.b,{to:"/calendar",title:"Calendar"})),c.a.createElement(D,null),c.a.createElement("div",null,c.a.createElement("button",{"data-lang":"ru-RU",onClick:a},"RU"),c.a.createElement("button",{"data-lang":"en-EN",onClick:a},"EN")))})),V=t(35),H=t.n(V),W=t(36),U=t.n(W);function P(){return c.a.createElement("div",{className:U.a.ldsFacebook},c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null))}var x=t(7),F=t.n(x),q=t(37),B=t.n(q),J=c.a.memo((function(e){var a=e.movieData,t=e.language;console.log("movie card");var n="en-EN"===t?{release_date:"Release date:",genres:"Genres:",tagline:"Tagline:",budget:"Budget:",revenue:"Revenue:",overview:"Overview:",vote_average:"Vote average:"}:{release_date:"\u0414\u0430\u0442\u0430 \u0440\u0435\u043b\u0438\u0437\u0430:",genres:"\u0416\u0430\u043d\u0440\u044b:",tagline:"\u0414\u0435\u0432\u0438\u0437:",budget:"\u0411\u044e\u0434\u0436\u0435\u0442:",revenue:"\u0421\u0431\u043e\u0440\u044b:",overview:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435:",vote_average:"\u0421\u0440\u0435\u0434\u043d\u044f\u044f \u043e\u0446\u0435\u043d\u043a\u0430:"};if(!a)return c.a.createElement(P,null);var r=a.poster_path?C(a.poster_path,"w342"):B.a;return c.a.createElement("div",{className:F.a.movieCard},c.a.createElement("div",{className:F.a.movieCard__row},c.a.createElement("div",{className:F.a.movieCard__poster},c.a.createElement("img",{src:r,alt:""})),c.a.createElement("div",{className:F.a.movieCard__info},c.a.createElement("h3",null,a.title),c.a.createElement("table",null,c.a.createElement("tbody",null,c.a.createElement("tr",null,c.a.createElement("th",{className:F.a.tableHeader},n.release_date),c.a.createElement("td",null,a.release_date)),c.a.createElement("tr",null,c.a.createElement("th",null,n.genres),c.a.createElement("td",null,a.genres.map((function(e){return e.name})).join(", "))),c.a.createElement("tr",null,c.a.createElement("th",null,n.tagline),c.a.createElement("td",null,a.tagline)),c.a.createElement("tr",null,c.a.createElement("th",null,n.budget),c.a.createElement("td",null,"$",a.budget)),c.a.createElement("tr",null,c.a.createElement("th",null,n.revenue),c.a.createElement("td",null,"$",a.revenue)),c.a.createElement("tr",null,c.a.createElement("th",null,n.overview),c.a.createElement("td",null,a.overview))))),c.a.createElement("div",{className:F.a.movieCard__averageRate,style:{backgroundColor:"hsl(".concat(10*a.vote_average,", 100%, 50%)")}},a.vote_average.toFixed(1))))})),$=c.a.memo((function(){console.log("movie card container");var e=Object(s.b)(),a=Object(s.c)((function(e){return e.movie.movieId})),t=Object(s.c)((function(e){return e.movie.isLoading})),n=Object(s.c)((function(e){return e.movie.movieData})),o=Object(s.c)((function(e){return e.app.language}));Object(r.useEffect)((function(){e(function(e){return function(a,t){a(w({isLoading:!0})),f(e,t().app.language).then((function(e){a(k({movieData:e.data})),a(w({isLoading:!1}))})).catch((function(e){return console.log(e)}))}}(a))}),[a,o]);var l="";return n&&(l=C(n.backdrop_path,"w780")),c.a.createElement("div",{className:"movieCardContainer",style:{backgroundImage:"url(".concat(l,")")}},t?c.a.createElement(P,null):c.a.createElement(J,{movieData:n,language:o}))})),Y=t(1);var K=function(){return console.log("app render"),c.a.createElement("div",{className:"App"},c.a.createElement(G,null),c.a.createElement("main",null,c.a.createElement(Y.c,null,c.a.createElement(Y.a,{path:"/",component:$}),c.a.createElement(Y.a,{path:"/calendar",component:$}))),c.a.createElement("footer",null,c.a.createElement("img",{src:H.a,className:"TMDB-logo",alt:"tmdbLogo"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var z=t(9),Q=t(6),X={movieId:"tt0816692",movieData:null,isLoading:!1},Z={searchWord:"",searchResults:null},ee=t(38),ae={language:"en-EN"},te=Object(z.c)({movie:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case N.SET_MOVIE:return Object(Q.a)({},e,{},a.payload,{movieId:a.payload.movieData.imdb_id});case N.SET_LOADING:case N.SET_MOVIE_ID:return Object(Q.a)({},e,{},a.payload);default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case I.SET_SEARCH_WORD:return Object(Q.a)({},e,{},a.payload);case I.SET_SEARCH_RESULTS:return Object(Q.a)({},e,{searchResults:Object(Q.a)({},a.payload)});default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case n.CHANGE_APP_LANGUAGE:return Object(Q.a)({},e,{},a.payload);default:return e}}}),ne=Object(z.d)(te,Object(z.a)(ee.a)),re=ne;window.store=ne,l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(M.a,null,c.a.createElement(s.a,{store:re},c.a.createElement(K,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},7:function(e,a,t){e.exports={movieCard:"MovieCard_movieCard__10HkD",movieCard__row:"MovieCard_movieCard__row__3IlIh",movieCard__poster:"MovieCard_movieCard__poster__1y9iN",movieCard__info:"MovieCard_movieCard__info__3i1g8",movieCard__averageRate:"MovieCard_movieCard__averageRate__3rsyj"}}},[[39,1,2]]]);
//# sourceMappingURL=main.eea61a83.chunk.js.map